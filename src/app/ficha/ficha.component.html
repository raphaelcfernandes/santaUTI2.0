<app-navbar></app-navbar>

<div class="row">
	<div class="col-sm-7" id="left">
		<form class="example-form">
			<div *ngIf="diagnosticos">
				<div class="panel panel-primary filterable">
					<div class="panel-heading">
						<div class="pull-right">
							<button class="btn btn-warning btn-sm" (click)="radioModel = 'todos'">Todos</button>
							<button class="btn btn-warning btn-sm" (click)="radioModel = 'resolvidos'">Resolvidos</button>
							<button class="btn btn-warning btn-sm" (click)="radioModel = 'ativos'">Ativos</button>
						</div>
					</div>
					<table class="table table-sm">
						<thead>
							<tr>
								<th class="labelsConsulta">Diagnóstico</th>
								<th class="labelsConsulta">Data Criado</th>
								<th class="labelsConsulta">Data Resolvido</th>
								<th class="labelsConsulta">Comentários</th>
								<th class="labelsConsulta">Ações</th>
							</tr>
						</thead>
						<tbody *ngIf="radioModel==='todos'">
							<tr *ngFor="let d of diagnosticos">
								<td>{{d.diagnostico}}</td>
								<td>{{d.dataDiagnostico}}</td>
								<td>{{d.dataResolvido}}</td>
								<td>{{d.comentario}}</td>
								<ng-container *ngIf="d.id!==undefined">
									<td>
										<button class="btn btn-info btn-sm" (click)="excluirDiagnostico(d)"> Excluir
										</button>
									</td>
								</ng-container>
								<ng-container *ngIf="!d.dataResolvido && d.id===undefined">
									<td>
										<button class="btn btn-info btn-sm" (click)="resolverDiagnostico(d)"> Resolver
										</button>
									</td>
								</ng-container>
								<ng-container *ngIf="d.dataResolvido && d.resolvido===true">
									<td>
										<button class="btn btn-info btn-sm" (click)="desfazerAcaoDiagnostico(d)"> Desfazer ação
										</button>
									</td>
								</ng-container>
							</tr>
						</tbody>
						<tbody *ngIf="radioModel==='ativos'">
							<tr *ngFor="let d of diagnosticos  | myFilter:diagnosticos">
								<td>{{d.diagnostico}}</td>
								<td>{{d.dataDiagnostico}}</td>
								<td>{{d.dataResolvido}}</td>
								<td>{{d.comentario}}</td>
								<ng-container *ngIf="d.id!==undefined">
									<td>
										<button class="btn btn-info btn-sm" (click)="excluirDiagnostico(d)"> Excluir
										</button>
									</td>
								</ng-container>
								<ng-container *ngIf="!d.dataResolvido && d.id===undefined">
									<td>
										<button class="btn btn-info btn-sm" (click)="resolverDiagnostico(d)"> Resolver
										</button>
									</td>
								</ng-container>
								<ng-container *ngIf="d.dataResolvido && d.resolvido===true">
									<td>
										<button class="btn btn-info btn-sm" (click)="desfazerAcaoDiagnostico(d)"> Desfazer ação
										</button>
									</td>
								</ng-container>
							</tr>
						</tbody>
						<tbody *ngIf="radioModel==='resolvidos' ">
							<tr *ngFor="let d of diagnosticos | filterResolvidos:diagnosticos">
								<td>{{d.diagnostico}}</td>
								<td>{{d.dataDiagnostico}}</td>
								<td>{{d.dataResolvido}}</td>
								<td>{{d.comentario}}</td>
								<ng-container *ngIf="d.id!==undefined">
									<td>
										<button class="btn btn-info btn-sm" (click)="excluirDiagnostico(d)"> Excluir
										</button>
									</td>
								</ng-container>
								<ng-container *ngIf="!d.dataResolvido && d.id===undefined">
									<td>
										<button class="btn btn-info btn-sm" (click)="resolverDiagnostico(d)"> Resolver
										</button>
									</td>
								</ng-container>
								<ng-container *ngIf="d.dataResolvido && d.resolvido===true">
									<td>
										<button class="btn btn-info btn-sm" (click)="desfazerAcaoDiagnostico(d)"> Desfazer ação
										</button>
									</td>
								</ng-container>
							</tr>
						</tbody>
					</table>
				</div>
				<hr>
				<table>
					<tfoot>
						<tr>
							<td>
								<div class="md-form form-sm">
									<input id="diagnostico" class="form-control input-lg" type="text" name="diagnostico" size="50" [(ngModel)]="diagnosticoString"
									 length="10" mdbCharCounter mdbActive />
									<label for="diagnostico" class="">Diagnóstico</label>
								</div>
							</td>
							<td>
								<div class="md-form form-sm">
									<input id="comentario" mdbCharCounter length="50" mdbActive class="form-control input-lg" type="text" name="comentario" size="50"
									 [(ngModel)]="comentarioString" />
									<label for="comentario" class="">Comentário</label>
								</div>
							</td>
							<td>
								<button class="btn btn-info btn-sm" (click)="addDiagnostico()">Adicionar</button>
							</td>
						</tr>
					</tfoot>
				</table>
			</div>
			<hr>
			<div *ngIf="fichaObject.Exames">
				<label class="labelsConsulta">
					Exames com alterações:
				</label>
				<div class="row">
					<div class="col-sm-6">
						<ng-container *ngIf="fichaObject.Exames.albumina !== undefined && fichaObject.Exames.albumina !== 'Estáveis' 
							&& fichaObject.Exames.albumina !== 'Não realizou/sem resultados'">
							Albumina: {{fichaObject.Exames.albumina}}
						</ng-container>
					</div>
					<div class="col-sm-6">
						<ng-container *ngIf="fichaObject.Exames.amilase !== undefined 
							&& fichaObject.Exames.amilase !== false">
							Amilase: {{fichaObject.Exames.amilase}}
						</ng-container>
					</div>
				</div>
				<div class="row">
					<div class="col-sm-6">
						<ng-container *ngIf="fichaObject.Exames.calcio !== undefined
								&& fichaObject.Exames.calcio !== 'Não realizou/sem resultados'">
							Cálcio: {{fichaObject.Exames.calcio}}
						</ng-container>
					</div>
					<div class="col-sm-6">
						<ng-container *ngIf="fichaObject.Exames.creatinina > 0">
							Creatinina: {{fichaObject.Exames.creatinina}}
						</ng-container>
					</div>
				</div>
				<div class="row">
					<div class="col-sm-6">
						<ng-container *ngIf="fichaObject.Exames.fosforo !== undefined
								&& fichaObject.Exames.fosforo !== 'Não realizou/sem resultados'">
							Fosfóro: {{fichaObject.Exames.fosforo}}
						</ng-container>
					</div>
					<div class="col-sm-6">
						<ng-container *ngIf="fichaObject.Exames.funcaoHepaticaBilirrubinas !== undefined
							&& fichaObject.Exames.funcaoHepaticaBilirrubinas !== 'Não realizou/sem resultados'">
							Bilirrubinas: {{fichaObject.Exames.funcaoHepaticaBilirrubinas}}
						</ng-container>
					</div>
				</div>
				<div class="row">
					<div class="col-sm-6">
						<ng-container *ngIf="fichaObject.Exames.funcaoHepaticaFAGGT !== undefined
								&& fichaObject.Exames.funcaoHepaticaFAGGT !== 'Não realizou/sem resultados'">
							FA/GGT: {{fichaObject.Exames.funcaoHepaticaFAGGT}}
						</ng-container>
					</div>
					<div class="col-sm-6">
						<ng-container *ngIf="fichaObject.Exames.funcaoHepaticaTransaminases !== undefined 
								&& fichaObject.Exames.funcaoHepaticaTransaminases !== 'Não realizou/sem resultados'">
							Transaminases: {{fichaObject.Exames.funcaoHepaticaTransaminases}}
						</ng-container>
					</div>
				</div>
				<div class="row">
					<div class="col-sm-6">
						<ng-container *ngIf="fichaObject.Exames.gasometriaArterial !== undefined
								&& fichaObject.Exames.gasometriaArterial !== 'Não realizou/sem resultados'">
							Gasometria Arterial: {{fichaObject.Exames.gasometriaArterial.tipoGasometriaArterial}} {{fichaObject.Exames.gasometriaArterial.metabolicaRespiratoria}}
							{{fichaObject.Exames.gasometriaArterial.compensadaDescompensada !== undefined ? fichaObject.Exames.gasometriaArterial.compensadaDescompensada
							: ''}}
						</ng-container>
					</div>
					<div class="col-sm-6">
						<ng-container *ngIf="fichaObject.Exames.hematocrito > 0">
							Hematócrito: {{fichaObject.Exames.hematocrito}}
						</ng-container>
					</div>
				</div>
				<div class="row">
					<div class="col-sm-6">
						<ng-container *ngIf="fichaObject.Exames.hemoglobina > 0">
							Hemoglobina: {{fichaObject.Exames.hemoglobina}}
						</ng-container>
					</div>
					<div class="col-sm-6">
						<ng-container *ngIf="fichaObject.Exames.lactato !== undefined 
								&& fichaObject.Exames.lactato !== 'Não realizou/sem resultados'">
							Lactato: {{fichaObject.Exames.lactato}}
						</ng-container>
					</div>
				</div>
				<div class="row">
					<div class="col-sm-6">
						<ng-container *ngIf="fichaObject.Exames.leucograma !== undefined 
								&& fichaObject.Exames.leucograma !== 'Não realizou/sem resultados'">
							Leucograma: {{fichaObject.Exames.leucograma}}
						</ng-container>
					</div>
					<div class="col-sm-6">
						<ng-container *ngIf="fichaObject.Exames.magnesio !== undefined && fichaObject.Exames.magnesio !== 'Normais' 
								&& fichaObject.Exames.magnesio !== 'Não realizou/sem resultados'">
							Magnésio: {{fichaObject.Exames.magnesio}}
						</ng-container>
					</div>
				</div>
				<div class="row">
					<div class="col-sm-6">
						<ng-container *ngIf="fichaObject.Exames.pcr !== undefined 
								&& fichaObject.Exames.pcr !== 'Não realizou/sem resultados'">
							PCR: {{fichaObject.Exames.pcr}}
						</ng-container>
					</div>
					<div class="col-sm-6">
						<ng-container *ngIf="fichaObject.Exames.plaquetas > 0">
							Plaquetas: {{fichaObject.Exames.plaquetas}}
						</ng-container>
					</div>
				</div>
				<div class="row">
					<div class="col-sm-6">
						<ng-container *ngIf="fichaObject.Exames.potassio !== undefined
								&& fichaObject.Exames.potassio !== 'Não realizou/sem resultados'">
							Potássio: {{fichaObject.Exames.potassio}}
						</ng-container>
					</div>
					<div class="col-sm-6">
						<ng-container *ngIf="fichaObject.Exames.ureia > 0">
							Uréia: {{fichaObject.Exames.ureia}}
						</ng-container>
					</div>
				</div>
				<div class="row">
					<div class="col-sm-6">
						<ng-container *ngIf="fichaObject.Exames.raioxTorax !== undefined
								&& fichaObject.Exames.raioxTorax !== 'Não realizou/sem resultados'">
							Raio-x: {{fichaObject.Exames.raioxTorax.diagnosticoRaiox}} em
							<ng-container *ngFor="let rx of raiox; let last = last">
								{{rx}}{{last ? '.' : ', '}}
							</ng-container>
						</ng-container>
					</div>
				</div>
			</div>
			<hr>
			<div *ngIf="allFichas">
				<label class="labelsConsulta">
					Antibióticos
				</label>

				<div class="row">
					<div class="col-sm-12">
						<ng-container *ngFor="let antibiotico of antibioticos">
							{{antibiotico.data}}:
							<ng-container *ngFor="let a of antibiotico.antibioticos; let last=last">
								{{a}}{{last ? '.' : ', '}}
							</ng-container>
						</ng-container>
					</div>
				</div>
			</div>
			<hr>
			<ng-container *ngIf="allFichas">
				<label class="labelsConsulta">
					PAM:
				</label>
				<div *ngFor="let ficha of allFichas">
					{{ficha.MonitorMultiparametrico.pam + ' (' + ficha.dataCriada + ').'}}
				</div>
			</ng-container>
			<hr>
			<ng-container *ngIf="allFichas">
				<label class="labelsConsulta">
					Curva Térmica:
				</label>
				<div *ngFor="let ficha of allFichas">
					{{ficha.FolhasBalanco.curvaTermica + ' (' + ficha.dataCriada + ').'}}
				</div>
			</ng-container>
			<hr>
			<label class="labelsConsulta">
				Glicemias:
			</label>
			<div *ngFor="let ficha of allFichas">
				{{ficha.Endocrino.curvaGlicemica + ' (' + ficha.dataCriada + ').'}}
			</div>
			<!-- <chart type="line" [data]="data" [options]="options"></chart> -->
			<hr>
			<div class="row">
				<div class="col-sm-12">
					<label class="labelsConsulta">
						Diurese registrado nas últimas 24hrs:
					</label>
				</div>
			</div>
			<ng-container *ngIf="allFichas">
				<div *ngFor="let ficha of allFichas">
					{{ ficha.FolhasBalanco.diurese }} em {{ficha.dataCriada}}
				</div>
			</ng-container>
			<hr>

			<div class="row" *ngIf="fichaObject.FolhasBalanco">
				<div class="col-sm-6">
					<label class="labelsConsulta">
						Balanço hídrico atual:
					</label>
					{{fichaObject.FolhasBalanco.balancoHidrico}}.
				</div>
				<div class="col-sm-6">
					<label class="labelsConsulta">
						Balanço hídrico acumulado:
					</label>
					{{balancoHidricoAcumulado > 0 ? '+' + balancoHidricoAcumulado : balancoHidricoAcumulado}}.
				</div>
			</div>
			<hr>
			<div class="row" *ngIf="fichaObject.Renal">
				<div class="col-sm-6">
					<label class="labelsConsulta">
						Peso atual:
					</label>
					{{fichaObject.Renal.peso}} kg.
				</div>
				<div class="col-sm-6">
					<label class="labelsConsulta">
						Peso acumulado:
					</label>
					{{pesoAcumulado > 0 ? '+' + pesoAcumulado : pesoAcumulado}} kg.
				</div>
			</div>

			<hr>
			<div class="row">
				<div class="col-sm-12">
					<label class="labelsConsulta">
						Dieta nas últimas 24hrs:
					</label>
				</div>
			</div>
			<ng-container *ngIf="allFichas">
				<div *ngFor="let nutricao of nutricaoArray">
					{{ nutricao.dieta }} com {{nutricao.valor}} volume/ml. ({{nutricao.data}})
				</div>
			</ng-container>
			<hr>
		</form>
	</div>


	<!-- <input type="text" [value]='hemodinamicoString'>
			 <input type="text" *ngFor="let droga of fichaObject.Dispositivos, let i =index" [value]='droga' (input)="fichaObject.Dispositivos[i] = $event.target.value; prepareArrays();" > -->

	<div class="col-sm-5" id="right">
		<div class="container" *ngIf="neurologicoString">
			<label class="labelsConsulta" for="neurologicoTextArea">Neurológico</label>
			<textarea autosize id="neurologicoTextArea" disabled class="form-control" [value]='neurologicoString'></textarea>
		</div>

		<div class="container" *ngIf="hemodinamicoString">
			<label class="labelsConsulta" for="hemodinamicoTextArea">Hemodinâmico</label>
			<textarea id="hemodinamicoTextArea" autosize disabled class="form-control" [value]='hemodinamicoString'></textarea>
		</div>

		<div class="container" *ngIf="respiratorioString">
			<label class="labelsConsulta" for="respiratorioTextArea">Respiratório</label>
			<textarea id="respiratorioTextArea" autosize disabled class="form-control" [value]='respiratorioString'></textarea>
		</div>

		<div class="container" *ngIf="abdomeString">
			<label class="labelsConsulta" for="abdomeTextArea">Abdome</label>
			<textarea id="abdomeTextArea" autosize disabled class="form-control" [value]='abdomeString'></textarea>
		</div>

		<div class="container" *ngIf="renalString">
			<label class="labelsConsulta" for="renalTextArea">Renal</label>
			<textarea id="renalTextArea" disabled class="form-control" autosize [value]='renalString'></textarea>
		</div>

		<div class="container" *ngIf="peleMucosasString">
			<label class="labelsConsulta" for="peleMucosasTextArea">Pele e Mucosas</label>
			<textarea id="peleMucosasTextArea" disabled class="form-control" autosize [value]='peleMucosasString'></textarea>
		</div>

		<div class="container" *ngIf="osteomuscularString">
			<label class="labelsConsulta" class="labelsConsulta" for="osteomuscularTextArea">Osteomuscular</label>
			<textarea id="osteomuscularTextArea" disabled class="form-control" autosize [value]='osteomuscularString'></textarea>
		</div>

		<div class="container" *ngIf="nutricionalString">
			<label class="labelsConsulta" for="nutricionalTextArea">Nutricional</label>
			<textarea id="nutricionalTextArea" disabled class="form-control" autosize [value]='nutricionalString'></textarea>
		</div>

		<div class="container" *ngIf="infecciosoString">
			<label class="labelsConsulta" for="infecciosoTextArea">Infeccioso</label>
			<textarea id="infecciosoTextArea" disabled class="form-control" autosize  [value]='infecciosoString'></textarea>
		</div>

		<div class="container" *ngIf="endocrinoString">
			<label class="labelsConsulta" for="endocrinoTextArea">Endócrino</label>
			<textarea id="endocrinoTextArea" disabled class="form-control" autosize  [value]='endocrinoString'></textarea>
		</div>

		<div class="container" *ngIf="metabolicoString">
			<label class="labelsConsulta" for="metabolicoTextArea">Metabólico</label>
			<textarea id="metabolicoTextArea" disabled class="form-control" autosize [value]='metabolicoString'></textarea>
		</div>

		<div class="container" *ngIf="hematologicoString">
			<label class="labelsConsulta" for="hematologicoTextArea">Hematológico</label>
			<textarea id="hematologicoTextArea" disabled class="form-control" autosize [value]='hematologicoString'></textarea>
		</div>
		<div class="container">
			<label class="labelsConsulta" for="analiseTextArea">Análise/Comentários</label>
			<textarea id="analiseTextArea" class="form-control" autosize ></textarea>
		</div>
		<div class="container">
			<label class="labelsConsulta" for="planoTextArea">Plano</label>
			<textarea id="planoTextArea" class="form-control" autosize ></textarea>
		</div>
	</div>
</div>